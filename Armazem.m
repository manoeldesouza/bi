
%% init
close all;
clear;
clc;


%% Função Objetivo (Somatório dos preço das viagens Armazem x Loja pela quantidade de viagens)
f=@(v) ...
  315.00*v(001) + 299.00*v(002) + 131.00*v(003) + 314.00*v(004) + 151.00*v(005) + 317.00*v(006) + 314.00*v(007) + 300.00*v(008) + 126.00*v(009) + 284.00*v(010) + ...
  312.00*v(011) + 267.00*v(012) + 125.00*v(013) + 288.00*v(014) + 142.00*v(015) + 277.00*v(016) + 285.00*v(017) + 307.00*v(018) + 129.00*v(019) + 270.00*v(020) + ... 
  309.00*v(021) + 221.00*v(022) + 113.00*v(023) + 266.00*v(024) + 295.00*v(025) + 142.00*v(026) + 258.00*v(027) + 240.00*v(028) + 139.00*v(029) + 271.00*v(030) + ... 
  100.00*v(031) + 281.00*v(032) + 280.00*v(033) + 116.00*v(034) + 245.00*v(035) + 273.00*v(036) + 169.00*v(037) + 130.00*v(038) + 317.00*v(039) + 295.00*v(040) + ...
  144.00*v(041) + 102.00*v(042) + 134.00*v(043) + 169.00*v(044) + 155.00*v(045) + 114.00*v(046) + 306.00*v(047) + 310.00*v(048) + 295.00*v(049) + 167.00*v(050) + ...
  308.00*v(051) + 315.00*v(052) + 124.00*v(053) + 305.00*v(054) + 152.00*v(055) + 306.00*v(056) + 286.00*v(057) + 307.00*v(058) + 128.00*v(059) + 301.00*v(060) + ...
  281.00*v(061) + 298.00*v(062) + 105.00*v(063) + 295.00*v(064) + 298.00*v(065) + 278.00*v(066) + 114.00*v(067) + 314.00*v(068) + 249.00*v(069) + 320.00*v(070) + ...
  110.00*v(071) + 258.00*v(072) + 117.00*v(073) + 313.00*v(074) + 143.00*v(075) + 104.00*v(076) + 128.00*v(077) + 126.00*v(078) + 314.00*v(079) + 148.00*v(080) + ...
  109.00*v(081) + 240.00*v(082) + 116.00*v(083) + 260.00*v(084) + 140.00*v(085) + 141.00*v(086) + 108.00*v(087) + 249.00*v(088) + 112.00*v(089) + 113.00*v(090) + ...
  128.00*v(091) + 134.00*v(092) + 255.00*v(093) + 106.00*v(094) + 309.00*v(095) + 307.00*v(096) + 259.00*v(097) + 274.00*v(098) + 111.00*v(099) + 320.00*v(100) + ...
  310.00*v(101) + 290.00*v(102) + 125.00*v(103) + 305.00*v(104) + 134.00*v(105) + 289.00*v(106) + 292.00*v(107) + 304.00*v(108) + 152.00*v(109) + 297.00*v(110) + ...
  306.00*v(111) + 196.00*v(112) + 132.00*v(113) + 313.00*v(114) + 149.00*v(115) + 312.00*v(116) + 315.00*v(117) + 296.00*v(118) + 127.00*v(119) + 313.00*v(120) + ...
  245.00*v(121) + 169.00*v(122) + 151.00*v(123) + 152.00*v(124) + 312.00*v(125) + 137.00*v(126) + 128.00*v(127) + 123.00*v(128) + 120.00*v(129) + 285.00*v(130) + ...
  273.00*v(131) + 125.00*v(132) + 116.00*v(133) + 115.00*v(134) + 116.00*v(135) + 294.00*v(136) + 296.00*v(137) + 151.00*v(138) + 145.00*v(139) + 145.00*v(140) + ...
  114.00*v(141) + 112.00*v(142) + 246.00*v(143) + 122.00*v(144) + 120.00*v(145) + 119.00*v(146) + 286.00*v(147) + 261.00*v(148) + 157.00*v(149) + 154.00*v(150) + ...
  286.00*v(151) + 295.00*v(152) + 114.00*v(153) + 291.00*v(154) + 142.00*v(155) + 286.00*v(156) + 311.00*v(157) + 284.00*v(158) + 129.00*v(159) + 281.00*v(160) + ... 
  107.00*v(161) + 108.00*v(162) + 282.00*v(163) + 258.00*v(164) + 301.00*v(165) + 286.00*v(166) + 266.00*v(167) + 140.00*v(168) + 261.00*v(169) + 252.00*v(170) + ... 
  160.00*v(171) + 285.00*v(172) + 305.00*v(173) + 292.00*v(174) + 152.00*v(175) + 140.00*v(176) + 281.00*v(177) + 159.00*v(178) + 295.00*v(179) + 117.00*v(180) + ... 
  248.00*v(181) + 250.00*v(182) + 133.00*v(183) + 265.00*v(184) + 126.00*v(185) + 272.00*v(186) + 290.00*v(187) + 300.00*v(188) + 133.00*v(189) + 269.00*v(190) + ... 
  126.00*v(191) + 297.00*v(192) + 273.00*v(193) + 264.00*v(194) + 137.00*v(195) + 314.00*v(196) + 142.00*v(197) + 245.00*v(198) + 118.00*v(199) + 279.00*v(200) + ... 
  261.00*v(201) + 253.00*v(202) + 146.00*v(203) + 109.00*v(204) + 247.00*v(205) + 278.00*v(206) + 155.00*v(207) + 103.00*v(208) + 130.00*v(209) + 145.00*v(210) + ... 
  281.00*v(211) + 314.00*v(212) + 293.00*v(213) + 170.00*v(214) + 298.00*v(215) + 111.00*v(216) + 300.00*v(217) + 145.00*v(218) + 275.00*v(219) + 250.00*v(220) + ... 
  293.00*v(221) + 101.00*v(222) + 117.00*v(223) + 130.00*v(224) + 294.00*v(225) + 301.00*v(226) + 102.00*v(227) + 126.00*v(228) + 165.00*v(229) + 134.00*v(230) + ... 
  126.00*v(231) + 129.00*v(232) + 252.00*v(233) + 299.00*v(234) + 110.00*v(235) + 163.00*v(236) + 315.00*v(237) + 282.00*v(238) + 260.00*v(239) + 252.00*v(240) + ... 
  242.00*v(241) + 121.00*v(242) + 103.00*v(243) + 167.00*v(244) + 135.00*v(245) + 127.00*v(246) + 117.00*v(247) + 106.00*v(248) + 101.00*v(249) + 283.00*v(250) ... 
  ;


%%
A = [ ...
    ones(1,25) zeros(1,225) ; ...   
    zeros(1,25) ones(1,25) zeros(1,200) ; ...
    zeros(1,50) ones(1,25) zeros(1,175) ; ...
    zeros(1,75) ones(1,25) zeros(1,150) ; ...
    zeros(1,100) ones(1,25) zeros(1,125) ; ...
    zeros(1,125) ones(1,25) zeros(1,100) ; ...
    zeros(1,150) ones(1,25) zeros(1,75) ; ...
    zeros(1,175) ones(1,25) zeros(1,50) ; ...
    zeros(1,200) ones(1,25) zeros(1,25) ; ...
    zeros(1,225) ones(1,25) ; ...
];


%% Capacidade de PRODUTOS dos armazens (limite máximo)
b = [
450 ; ...
430 ; ...
370 ; ...
320 ; ...
250 ; ...
490 ; ...
470 ; ...
450 ; ...
300 ; ...
470 ; ...
];


%%
Aeq = [...
repmat([1 0 0 0 0 0 0 0 0 0],1,25); ... %1
repmat([0 1 0 0 0 0 0 0 0 0],1,25); ... %2
repmat([0 0 1 0 0 0 0 0 0 0],1,25); ... %3
repmat([0 0 0 1 0 0 0 0 0 0],1,25); ... %4
repmat([0 0 0 0 1 0 0 0 0 0],1,25); ... %5
repmat([0 0 0 0 0 1 0 0 0 0],1,25); ... %6
repmat([0 0 0 0 0 0 1 0 0 0],1,25); ... %7
repmat([0 0 0 0 0 0 0 1 0 0],1,25); ... %8
repmat([0 0 0 0 0 0 0 0 1 0],1,25); ... %9
repmat([0 0 0 0 0 0 0 0 0 1],1,25); ... %10
repmat([1 0 0 0 0 0 0 0 0 0],1,25); ... %11
repmat([0 1 0 0 0 0 0 0 0 0],1,25); ... %12
repmat([0 0 1 0 0 0 0 0 0 0],1,25); ... %13
repmat([0 0 0 1 0 0 0 0 0 0],1,25); ... %14
repmat([0 0 0 0 1 0 0 0 0 0],1,25); ... %15
repmat([0 0 0 0 0 1 0 0 0 0],1,25); ... %16
repmat([0 0 0 0 0 0 1 0 0 0],1,25); ... %17
repmat([0 0 0 0 0 0 0 1 0 0],1,25); ... %18
repmat([0 0 0 0 0 0 0 0 1 0],1,25); ... %19
repmat([0 0 0 0 0 0 0 0 0 1],1,25); ... %20
repmat([1 0 0 0 0 0 0 0 0 0],1,25); ... %21
repmat([0 1 0 0 0 0 0 0 0 0],1,25); ... %22
repmat([0 0 1 0 0 0 0 0 0 0],1,25); ... %23
repmat([0 0 0 1 0 0 0 0 0 0],1,25); ... %24
repmat([0 0 0 0 1 0 0 0 0 0],1,25) ...  %25
];


%% Demanda de PRODUTOS das Lojas (limite mínimo)
beq = [
201 ; ...
120 ; ...
180 ; ...
120 ; ...
110 ; ...
220 ; ...
150 ; ...
160 ; ...
120 ; ...
160 ; ...
190 ; ...
210 ; ... 
140 ; ...
141 ; ...
110 ; ...
230 ; ...
161 ; ...
130 ; ...
170 ; ...
131 ; ...
180 ; ...
120 ; ...
160 ; ...
140 ; ...
170 ; ...
];


%%
n_vars = 250;
LB = zeros(1, n_vars);
UB = 400 * ones(1, n_vars);


%% Execução do algoritmo de Optimização Genética
options = gaoptimset('display','iter', 'generations', 5000, 'StallGenLimit', 10000, 'PopulationSize', 50, 'Vectorized', 'off');
[melhor_v, fval] = ga(f, n_vars, A, b, Aeq, beq, LB, UB, [], options);

melhor_v
fval
